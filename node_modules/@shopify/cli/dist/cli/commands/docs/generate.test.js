import {
  extractCommandData,
  writeCommandDocumentation,
  writeCommandFlagInterface,
  writeCommandUsageExampleFile
} from "../../../chunk-AL4KPZUN.js";
import {
  describe,
  globalExpect,
  test,
  vi
} from "../../../chunk-OXZ2SRCK.js";
import "../../../chunk-EDVQGTOL.js";
import "../../../chunk-4XNS74OG.js";
import "../../../chunk-DWXXFI3U.js";
import "../../../chunk-CKKROMZF.js";
import "../../../chunk-LKGDG6WW.js";
import "../../../chunk-63QEL3SZ.js";
import "../../../chunk-QX3YP6O5.js";
import "../../../chunk-HTYJDJRZ.js";
import "../../../chunk-B4KDQK3X.js";
import "../../../chunk-OQBI57X3.js";
import "../../../chunk-5NBS5LAW.js";
import "../../../chunk-LY6UIYOG.js";
import "../../../chunk-7YJH7P7B.js";
import "../../../chunk-FAFQQMD4.js";
import {
  writeFile
} from "../../../chunk-4IXC46ZA.js";
import "../../../chunk-LUGC3D2G.js";
import "../../../chunk-FQIRJADJ.js";
import "../../../chunk-FBB6KUZG.js";
import "../../../chunk-PCQFWMMD.js";
import "../../../chunk-SZQX5J7X.js";
import "../../../chunk-67MDUPX5.js";
import "../../../chunk-PBFWVFAQ.js";
import "../../../chunk-FWGRGI4R.js";
import "../../../chunk-BE73NZXB.js";
import "../../../chunk-VQZ2SHRY.js";
import "../../../chunk-6SL33DOA.js";
import "../../../chunk-WCNR75S2.js";
import "../../../chunk-MHMFNQE3.js";
import "../../../chunk-3PIGYQSE.js";
import "../../../chunk-BZJX2NV6.js";
import "../../../chunk-RQ24VTW4.js";
import "../../../chunk-3JLUTHGR.js";
import "../../../chunk-GXPKATXW.js";
import {
  init_cjs_shims
} from "../../../chunk-M63RTPGR.js";

// src/cli/commands/docs/generate.test.ts
init_cjs_shims();
vi.mock("@shopify/cli-kit/node/fs");
var testCommand = {
  aliases: [],
  args: {},
  flags: {
    flag1: {
      name: "flag1",
      type: "option",
      char: "f",
      description: "flag description"
    },
    flag2: {
      name: "flag2",
      type: "boolean",
      char: "a",
      description: "another flag description",
      env: "FLAG_ENV",
      allowNo: false
    }
  },
  descriptionWithMarkdown: "command markdown description",
  description: "command description",
  summary: "command summary",
  hidden: false,
  hiddenAliases: [],
  id: "topic:test-command",
  load: () => Promise.resolve({})
};
var commandData = {
  commandName: "topic test-command",
  fileName: "topic-test-command",
  interfaceName: "topictestcommand",
  hasTopic: true,
  topic: "topic",
  hasFlags: true
};
describe("extractCommandData", () => {
  test("returns the correct data", () => {
    globalExpect(extractCommandData(testCommand)).toEqual(commandData);
  });
});
describe("writeCommandFlagInterface", () => {
  test("calls writeFile with the correct content", async () => {
    await writeCommandFlagInterface(testCommand, commandData);
    globalExpect(writeFile).toHaveBeenCalledWith(
      globalExpect.stringContaining("docs-shopify.dev/commands/interfaces/topic-test-command.interface.ts"),
      `// This is an autogenerated file. Don't edit this file manually.
export interface topictestcommand {
  /**
   * flag description
   *
   */
  '-f, --flag1 <value>'?: string

  /**
   * another flag description
   * @environment FLAG_ENV
   */
  '-a, --flag2'?: ''
}
`
    );
  });
  test("calls writeFile with the correct content for a command with no flags", async () => {
    await writeCommandFlagInterface({ ...testCommand, flags: {} }, commandData);
    globalExpect(writeFile).toHaveBeenCalledWith(
      globalExpect.stringContaining("docs-shopify.dev/commands/interfaces/topic-test-command.interface.ts"),
      `// This is an autogenerated file. Don't edit this file manually.
export interface topictestcommand {

}
`
    );
  });
});
describe("writeCommandDocs", () => {
  test("calls writeFile with the correct content", async () => {
    await writeCommandDocumentation(testCommand, commandData);
    globalExpect(writeFile).toHaveBeenCalledWith(
      globalExpect.stringContaining("docs-shopify.dev/commands/topic-test-command.doc.ts"),
      `// This is an autogenerated file. Don't edit this file manually.
import {ReferenceEntityTemplateSchema} from '@shopify/generate-docs'

const data: ReferenceEntityTemplateSchema = {
  name: 'topic test-command',
  description: \`command markdown description\`,
  overviewPreviewDescription: \`command summary\`,
  type: 'command',
  isVisualComponent: false,
  defaultExample: {
    codeblock: {
      tabs: [
        {
          title: 'topic test-command',
          code: './examples/topic-test-command.example.sh',
          language: 'bash',
        },
      ],
      title: 'topic test-command',
    },
  },
  definitions: [
  {
    title: 'Flags',
    description: 'The following flags are available for the \`topic test-command\` command:',
    type: 'topictestcommand',
  },
  ],
  category: 'topic',
  related: [
  ],
}

export default data`
    );
  });
});
describe("writeCommandUsageExampleFile", () => {
  test("calls writeFile with the correct content", async () => {
    await writeCommandUsageExampleFile(testCommand, commandData);
    globalExpect(writeFile).toHaveBeenCalledWith(
      globalExpect.stringContaining("docs-shopify.dev/commands/examples/topic-test-command.example.sh"),
      "shopify topic test-command [flags]"
    );
  });
});
